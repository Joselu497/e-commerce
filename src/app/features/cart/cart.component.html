<div class="px-4">
    @if ((itemCount$ | async) === 0) {
    <div class="text-center text-gray-500">Your cart is empty</div>
    } @else {
    <div class="max-h-[calc(100vh-10.25rem)] overflow-y-auto">
        @for (item of cartItems$ | async; track item.Product.id) {
        <div class="border-b p-3 space-y-3">
            <h2 class="text-sm font-semibold text-gray-900">
                {{ item.Product.title }}
            </h2>
            <div class="flex items-center justify-between">
                <span class="font-medium text-gray-900">
                    {{ item.Product.price | currency }}
                </span>
                <div class="inline-flex items-center gap-2">
                    <button (click)="removeFromCart(item.Product)"
                        class="bg-gray-100 rounded-lg p-1 text-gray-500 hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path d="M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z" />
                        </svg>
                    </button>
                    <span class="font-medium text-gray-900">x{{ item.quantity }}</span>
                    <button (click)="addToCart(item.Product)"
                        class="bg-gray-100 rounded-lg p-1 text-gray-500 hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path
                                d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                        </svg>
                    </button>

                </div>
            </div>
        </div>
        }
    </div>
    <div class="fixed bottom-3 right-3 left-3 py-2 px-4 border-t-2 border-gray-400 space-y-3">
        <div class="flex justify-between items-center">
            <p class="font-semibold text-gray-900">Total ({{ itemCount$ | async }} items)</p>
            <p class="text-lg font-bold text-gray-900">{{ total$ | async | currency }}</p>
        </div>
        <div class="flex justify-between items-center">
            <button (click)="clearCart()"
                class="bg-gray-200 font-semibold text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer text-sm items-center">
                Clear cart
            </button>
            <button (click)="onProcess()"
                class="bg-indigo-600 font-semibold text-white px-4 py-2 rounded-lg hover:bg-indigo-500 transition-colors cursor-pointer text-sm items-center">
                Proceed to payment
        </button>
        </div>
    </div>
    }
</div>